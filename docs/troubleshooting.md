# DewAI トラブルシューティング / FAQ

## 1. Ollama と接続できない
- 症状: 「AIモデルが準備できていません」
- 対処:
  - `ollama serve` を実行
  - `ollama pull gemma3:4b` でモデルを取得
  - ファイアウォールやポート `11434` ブロックを確認
  - Windows サービス/権限での実行に注意

## 2. モデルが選択できない/使えない
- 現状、`gemma3:1b/4b` のみサポート（Rust側でフィルタ）
- モデル一覧は `/api/tags` から取得。未ダウンロードの場合は `ollama pull` を実行

## 3. 応答が遅い/固まる
- 症状: 生成に時間がかかる、応答が来ない
- 対処:
  - 初回はモデルロードで時間がかかることがあります
  - PCのメモリ使用率を確認
  - 連続で多くのリクエストを送らない
  - ストリーミング未対応のため、長文生成で待ちが発生
  - 将来、stream=true へ対応予定
  - それまでの回避策: 短い入力、AI数を減らす、4b→1b へ切替

## 4. アプリがクラッシュ/フリーズ
- 再現手順/スクリーンショット/ログ（コンソール）を収集
- WebView2 の更新/修復を実施
- 依存の再インストール（`npm ci`）

## 5. AI の設定を途中で変更したい
- `/play` 右上「AI編集」、または `/sessions` の「編集」から保存
- アクティブなセッションにも参加者変更が反映

## 6. 既知の制約
- 応答は全文生成後に表示（非ストリーミング）
- 入力は1メッセージ 10,000 文字上限
- 保存は localStorage（SQLite へ移行予定）

## 7. 連絡/報告
- Issue: GitHub リポジトリの Issues へ
- テンプレ: 再現手順 / 期待結果 / 実結果 / ログ添付

## 8. 分析が失敗する（JSONエラー）
- 症状: 「JSON解析に失敗しました」
- 対処:
  - 内部で `jsonrepair` による修復を試みます
  - 発言を少し短く/具体化して再試行
  - モデルを再起動（`ollama serve` を再起動）

## 9. 自動保存が反映されない
- 症状: セッションが保存されない/古いまま
- 対処:
  - 直後に複数の保存が競合する場合がありますが、最新スナップショットが再保存されます
  - 再起動後、`セッション一覧` から続きが再開できるか確認

## 10. 自動スクロールしない/途中で止まる
- 症状: 新着があっても最下部へ移動しない
- 対処:
  - 手動スクロール中は自動スクロールを抑止します
  - 表示される「↓ 新しいメッセージを表示する」ボタンで復帰してください

## 11. ビルドに失敗する
- 対処:
  - Node v18+/Rust stable を使用しているか確認
  - `npm ci` で再インストール
  - `cargo clean` の後に再ビルド
  - OSごとのビルド依存を満たしているか確認（Tauriのドキュメント参照）
