# DewAI ユーザーガイド

このガイドでは、DewAIの基本的な使い方を説明します。

## 前提
- Ollama が動作し、`gemma3:4b` が利用可能であること
- 初回はモデルのダウンロードに時間がかかる場合があります

## 起動と準備
1. アプリを起動します（開発中は `npm run dev`）。
2. Ollama が起動していない場合はエラーが表示されます。`ollama serve` を実行してください。

## 新規セッションの開始
1. スタート画面から「新しく開始」を選びます。
2. 設定（Config）で以下を入力します。
   - テーマ（議論の題目）
   - 参加するAIの「名前・役割・説明」
   - 自分（ユーザー）が参加するかどうか
3. Play画面に進みます。

## プレイ画面の使い方
- 参加者バッジ: 現在のターンの参加者がハイライト表示されます。
- メッセージ履歴: 発言が時系列に表示されます。最下部付近で新規メッセージが来ると「↓ 新しいメッセージを表示する」ボタンが出ます。
- 入力欄（ユーザー参加ON時）:
  - 自分のターンでテキストを入力し「発言する」を押すと送信されます。
  - 文字数上限は 10,000 文字です。
- 分析パネル: 右上の「分析」ボタンで開閉します（PCはサイドパネル、モバイルはオーバーレイ）。
- AI編集: ヘッダーの「AI編集」から参加者（AI）の追加・削除・編集ができます。

## 要約と分析（自動）
- 要約: 初回は発言が12件以上でフル要約、以降は4件以上増えたら部分要約を実施します。
- 分析: 3ターンごとに自動実行します。必要に応じて「更新」ボタンで再実行できます。

## セッションの保存/再開
- 発言やAI応答ごとに自動保存されます（SQLite）。
- 「セッション一覧」から過去のセッションを再開できます。再開時は最後の発言者を基に次のターンが決まります。

## よくある質問（FAQ）
- モデルが未接続と出る
  - Ollama を起動し、モデル `gemma3:4b` を `ollama pull` 済みか確認してください。
- 分析が失敗する
  - まれにJSON整形が必要な応答があります。内部で修復を試みますが、発言を少し調整して再試行してください。
- 自動スクロールしない
  - 手動でスクロールしている間は自動スクロールを抑止します。ボタンから復帰できます。

## ショートカット/操作のヒント
- 入力中に Enter で送信（将来対応予定）
- 参加者が多い場合は、分析で論点や対立を整理して確認しましょう

## トラブルシューティング
- うまく起動しない、ビルドに失敗する → `docs/troubleshooting.md` を参照してください。
