# DewAI ユーザーガイド

本書はエンドユーザ向けの利用手順とFAQをまとめたガイドです。

## 0. 概要
DewAI は、ローカルで動作するOllamaモデルと連携して、完全オフラインで安全にAIとの議論やブレインストーミングを行えるデスクトップアプリです。Tauri(Rust) + React(Chakra UI v3)で構築されています。

### 0.1 作品要約
- 完全ローカル/プライバシー重視のAI対話アプリ
- AI参加者の個性（名前/役割/説明）を設定して議論を進行
- 議論の自動保存/再開、要約/分析パネルで論点を把握

### 0.2 機能一覧
- AI参加者の作成/編集（名前・役割・説明）
- 議論の開始/継続（同一トピックは上書き保存）
- 自動要約（既定: 4ターンごと）と直近会話の保持
- 議論分析（主要論点/立場/対立点/共通点/未探索領域）
- モデル選択（gemma3:1b/4b）
- 完全ローカル動作（Ollama、ポート11434）

---

## 1. 動作環境とインストール

### 1.1 動作環境
- OS: Windows 10/11（推奨）
- ランタイム: Edge WebView2（未インストールの場合は自動/手動導入が必要）
- Ollama: localhost:11434 で稼働、`gemma3:4b`（または `gemma3:1b`）モデルを事前に pull
- 推奨スペック: 4コア/8GB RAM 以上、ストレージはモデル容量に注意

### 1.2 インストール（エンドユーザ）
1) インストーラ/配布パッケージを入手し実行
2) 初回起動前に Ollama を起動（`ollama serve`）し、`ollama pull gemma3:4b` を実施
3) アプリを起動してホーム画面へ

### 1.3 開発環境セットアップ（任意）
- Node.js v18+ / Rust 最新
- リポジトリを clone 後、`npm install` → `npm run dev`
- Tauri 開発: `npm run tauri dev`

### 1.4 初期設定
- 設定画面で AI 参加者を追加（名前/役割/説明）
- テーマ（議論トピック）を入力
- 保存後、プレイ画面へ移動

---

## 2. 基本操作

### 2.1 起動
- Windows のショートカットまたは実行ファイルから起動
- Ollama が未起動の場合は起動を促すダイアログが表示されます

### 2.2 画面ガイド

#### 2.2.1 スタート画面（`/start` または `/home`）
- アプリの説明と開始導線

#### 2.2.2 開始方法選択画面（`/start`）
- 新規に議論を作る / 既存セッションを再開（`/sessions`）

#### 2.2.3 議論の設定画面（`/config`）
- テーマ（議論トピック）、AI参加者（名前/役割/説明）、ユーザー参加の有無を設定
- 保存すると `aiConfig` に保持

#### 2.2.4 議論 画面（`/play`）
- 下部の入力欄からユーザーが参加、または AI のみで議論を進行
- 右上「AI編集」から参加者情報を編集可（セッション参加者にも反映）
- 分析パネル（📊）で主要論点や立場を確認
- セッションは自動保存。トピックが同一の場合は上書き継続

#### 2.2.5 セッション設定/一覧（`/sessions`）
- 保存済みセッションの一覧/続き/削除/AI編集が可能

### 2.3 設定/カスタマイズ（開発者向け）
- テーマ/カラーパレット: `src/components/ui/provider.tsx`
- 要約頻度・保持ターン: `src/pages/play.tsx` の定数（`TURNS_BEFORE_SUMMARY`, `RECENT_TURNS_TO_KEEP`）
- 対応モデル: Rust 側 `main.rs` のフィルタ（gemma3:1b/4b）

### 2.4 セッション管理
- 保存形式: localStorage JSON（将来 SQLite 移行予定）
- キー: `aiConfig`, `currentSessionInfo`, セッション本体はDBユーティリティで管理
- 同一トピックは継続上書き、`/sessions` から再開可能

---

## 3. トラブルシューティングとFAQ

### 3.1 Ollama と接続されない
- `ollama serve` が動作しているか
- `ollama pull gemma3:4b` を実施済みか
- ポート 11434 がブロックされていないか（FW/プロキシ）

### 3.2 AIモデルが利用できない
- Rust 側で `gemma3:1b/4b` のみ許可
- モデル一覧は `/api/tags` で取得（UIに反映）

### 3.3 アプリがクラッシュする
- 再現手順とログ（コンソール/ターミナル）を確認
- WebView2 の更新/再インストール

### 3.4 AIの設定を途中で変更したい
- `/play` 右上「AI編集」、または `/sessions` の「編集」から可能

### 3.5 既知の制約
- 応答はストリーミング未対応（全文生成後に表示）
- 1メッセージは 10,000 文字上限
- 対応モデルは gemma3:1b/4b
- 保存は localStorage 依存（今後 SQLite へ移行予定）

### 3.6 外部ライブラリ・ライセンス情報
- 付録 A を参照
